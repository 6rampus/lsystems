# L-systems
A Python implementation of some L-systems described in Chapter 1 of the book *[The Algorithmic Beauty of Plants](http://algorithmicbotany.org/papers/abop/abop.pdf)*.

#### Table of Contents
- [Definition of L-systems](#definition)  
- [How to use](#usage)  
- [Features](#features)  
- [Examples](#examples)

Koch construction          |  Plant-like structure
:-------------------------:|:-------------------------:
![koch-construction](/examples/fig-1.9/b.png)  |  ![plant-like-structure](/examples/fig-1.24/d.png)

<a name="definition"></a>
## Definition of L-systems
An L-system is a type of formal grammar that can be defined as a tuple **G = ⟨V, ω, P⟩** where
- V is the **alphabet** of the system
- ω is a nonempty word called the **axiom**
- P is a finite **set of productions**
> A **production** is a rewrite rule *a→X* (indicating that *a*, the predecessor, can be replaced by *X*, the successor)

As it is mentioned in [the book](http://algorithmicbotany.org/papers/abop/abop.pdf), the central concept of L-systems is that of rewriting. The initial state of the system is defined by the axiom, a string containing symbols from the alphabet that may or may not be replaceable (variables vs. constants or terminals). From this initial state/string, the rewrite rules or productions are applied iteratively (find symbol as a predecessor in the set of productions, replace in the string by its successor, repeat).

In L-systems, productions are applied in parallel. In other words, each iteration applies as many rewriting rules as possible, which results in all replaceable symbols in the string being replaced in the same iteration. This is the essential difference between L-systems and formal languages generated by formal grammars, which apply only one rule per iteration.

<a name="usage"></a>
## How to use
Python 3 is the only requirement. You can clone the repo and try out some examples that I took from [the book](http://algorithmicbotany.org/papers/abop/abop.pdf) like this:
```
python3 lsystems.py examples/fig-1.24/a.txt
```

or you can write your own L-systems in a text file with the input format specified below.

### Input
This implementation uses the turtle interpretation of strings described in [the book](http://algorithmicbotany.org/papers/abop/abop.pdf), so many of the symbols you can find in it have the same meaning here (with a few exceptions).

|Symbol          |Command                        |
|----------------|-------------------------------|
|**F**|Move forward a step of length *d*|
|**f**|Move forward a step of length *d* without leaving a trail|
|**+**|Turn left by angle *δ*|
|**-**|Turn right by angle *δ*|
|**l**|F<sub>l</sub> in the book. Move forward|
|**r**|F<sub>r</sub> in the book. Move forward|
|**L**|Ignore, do nothing|
|**R**|Ignore, do nothing|
|**[**|Push the current state of the turtle onto a stack|
|**]**|Pop a state from the stack and make it the current state of the turtle|

> A step size or distance *d* and an angle increment *δ* are given as parameters

The input should be a `.txt` file containing just one parameter per line, in this order: number of iterations, step distance, angle increment, axiom, set of productions (one production per line).
```
number of iterations
step distance
angle increment
axiom
production #1
production #2
...
production #N
```
For example:
```
2
4
90
F+F+F+F
F->F+f-FF+F+FF+Ff+FF-f+FF-F-FF-Ff-FFF
f->ffffff
```

#### Output
Every execution saves the result in a PostScript file in the folder that contains the input file.

<a name="features"></a>
## Features
- [x] Loading L-system parameters (number of iterations, axiom, productions, etc.) from file
- [ ] Loading turtle and screen parameters (trail and background color, starting orientation, etc.) from file
- [ ] 2D turtle interpretation of...
	- [x] deterministic and context-free L-systems (DOL-systems)
	- [x] bracketed OL-systems for branching structures
	- [ ] stochastic L-systems
	- [ ] context-sensitive L-systems
	- [ ] parametric L-systems
- [ ] Modeling in three dimensions
- [x] Saving results in a PostScript file

<a name="examples"></a>
## Examples
#### Koch constructions
![Quadratic Koch island](/examples/fig-1.7/a.png)  

#### Branching structures
![Branch-1](/examples/fig-1.24/a.png) ![Branch-2](/examples/fig-1.24/b.png) ![Branch-3](/examples/fig-1.24/c.png)  
![Branch-4](/examples/fig-1.24/d.png) ![Branch-5](/examples/fig-1.24/e.png) ![Branch-6](/examples/fig-1.24/f.png)  
